/*! For license information please see edit_purchase.284154e368e32db0.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3011],{69128:(t,e,r)=>{r.d(e,{A:()=>f});var i=r(78061),n=r(5947),a=r.n(n),o=r(95353);const s={SUCCESS:"success",ERROR:"error",WARNING:"warning",DANGER:"danger"};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(){c=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function p(t,e,r,i){var a=e&&e.prototype instanceof y?e:y,o=Object.create(a.prototype),s=new I(i||[]);return n(o,"_invoke",{value:D(t,r,s)}),o}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var h="suspendedStart",m="suspendedYield",v="executing",_="completed",b={};function y(){}function g(){}function P(){}var x={};d(x,o,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(T([])));S&&S!==r&&i.call(S,o)&&(x=S);var O=P.prototype=y.prototype=Object.create(x);function k(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(n,a,o,s){var c=f(t[n],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==u(d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(d).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return a=a?a.then(n,n):n()}})}function D(e,r,i){var n=h;return function(a,o){if(n===v)throw Error("Generator is already running");if(n===_){if("throw"===a)throw o;return{value:t,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var u=$(s,i);if(u){if(u===b)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=_,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=v;var c=f(e,r,i);if("normal"===c.type){if(n=i.done?_:m,c.arg===b)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=_,i.method="throw",i.arg=c.arg)}}}function $(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,$(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),b;var a=f(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(u(e)+" is not iterable")}return g.prototype=P,n(O,"constructor",{value:P,configurable:!0}),n(P,"constructor",{value:g,configurable:!0}),g.displayName=d(P,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,d(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},k(j.prototype),d(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,i,n,a){void 0===a&&(a=Promise);var o=new j(p(t,r,i,n),a);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(O),d(O,l,"Generator"),d(O,o,(function(){return this})),d(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return s.type="throw",s.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;E(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:T(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),b}},e}function l(t,e,r,i,n,a,o){try{var s=t[a](o),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(i,n)}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function p(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const f={created:function(){var t=this;Object.keys(this.registerEvents||{}).forEach((function(e){var r;return null===(r=Fire)||void 0===r?void 0:r.$on(e,t.registerEvents[e])}))},data:function(){return{registerEvents:{}}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,o.L8)(["currentUserPermissions","currentUser"])),methods:{makeToast:function(t,e,r){this.$root.$bvToast.toast(this.$t(e),{title:this.$t(r),variant:t,solid:!0})},makeErrorToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error";this.makeToast(s.ERROR,t,e)},makeSuccessToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Success";this.makeToast(s.SUCCESS,t,e)},makeWarningToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Warning";this.makeToast(s.WARNING,t,e)},makeDangerToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Danger";this.makeToast(s.DANGER,t,e)},getValidationState:function(t){var e=t.dirty,r=t.validated,i=t.valid;return e||r?void 0===i?null:i:null},formatNumber:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return i.Ay.formatNumber(t,e)},displayCurrency:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{decimal:1,symbol:null},r=this.formatNumber(null!=t?t:"",e.decimal||1),i=e.symbol||this.data.symbol;return"".concat(i," ").concat(r)},fire:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("fire event",t,r),null===(e=Fire)||void 0===e||e.$emit(t,r)},execute:function(t){return(e=c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a().start(),a().set(.1),e.prev=2,e.next=5,Promise.resolve(t());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("mixin execute: ",e.t0);case 10:return e.prev=10,a().done(),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})),function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function o(t){l(a,i,n,o,s,"next",t)}function s(t){l(a,i,n,o,s,"throw",t)}o(void 0)}))})();var e}}}},33425:(t,e,r)=>{r.d(e,{O3:()=>n,eP:()=>i,gh:()=>o,uI:()=>a});var i={EditItem:"Purchase:Item:Edit",DeleteItem:"Purchase:Item:Delete",IncrementItem:"Purchase:Item:Increment",DecrementItem:"Purchase:Item:Decrement",VerifyItemQty:"Purchase:Item:VerifyQty",SubmitUpdateItemForm:"Purchase:Item:SubmitUpdateForm"},n={DeleteItem:"Promotion:Item:Delete"},a={Pdf:"Purchase:Payment:Pdf",EditPayment:"Purchase:Payment:Edit",SendPaymentEmail:"Purchase:Payment:SendEmail",SendPaymentSMS:"Purchase:Payment:SendSMS",RemovePayment:"Purchase:Payment:RemovePayment"},o={CreateCustomer:"POS:Customer:Create",SelectProduct:"POS:Product:Select",UpdateDetail:"POS:Detail:Update",IncrementDetail:"POS:Detail:Increment",DecrementDetail:"POS:Detail:Decrement",VerifyQty:"POS:Detail:VerifyQty",DeleteDetail:"POS:Detail:Delete",SearchProduct:"POS:Product:Search",SubmitPayment:"POS:Payment:Submit"}},78061:(t,e,r)=>{function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a,o,s=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=a.call(r)).done)&&(s.push(i.value),s.length!==e);u=!0);}catch(t){c=!0,n=t}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=Array(e);r<e;r++)i[r]=t[r];return i}r.d(e,{Ay:()=>c,DU:()=>u,RP:()=>o,W2:()=>s,ZV:()=>a});var a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=i(Number(t).toFixed(e).split("."),2),n=r[0],a=r[1];return e<=0?n:"".concat(n,".").concat(a)},o=function(t){return null!=t&&""!==t.trim()&&/\d/.test(t)&&0!==t},s=function(t){if(null==t)return!0;var e=Number(t);if(isNaN(e))return!0;if("string"==typeof t&&""===t.trim())return!0;var r=String(t);return!/^-?\d+(\.\d+)?$/.test(r)},u=function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",i=0;i<t;i++)r+=e.charAt(Math.floor(62*Math.random()));return r};const c={toggleFullScreen:function(){var t=window.document,e=t.documentElement,r=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen,i=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?i.call(t):r.call(e)},formatNumber:a,getValidationState:function(t){var e=t.dirty,r=t.validated,i=t.valid;return e||r?void 0===i?null:i:null},isNonZeroNumber:o,isNotANumber:s,randomString:u}},49021:(t,e,r)=>{r.r(e),r.d(e,{default:()=>F});var i=r(5947),n=r.n(i),a=r(95353),o=r(69128);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=r(33425);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const v={name:"OrderProductItem",mixins:[o.A],props:{detail:{type:Object,required:!0}},computed:h(h({},(0,a.L8)(["currentUserPermissions","currentUser"])),{},{events:function(){return d.eP},discount_amount:function(){return"1"===this.detail.discount_method?this.formatNumber(this.detail.discount_net*this.detail.quantity,2):this.formatNumber(this.detail.discount_net)}})};var _=r(14486);const b=(0,_.A)(v,(function(){var t=this,e=t._self._c;return e("tr",{class:{row_deleted:1===t.detail.del||0===t.detail.no_unit}},[e("td",[t._v(t._s(t.detail.detail_id))]),t._v(" "),e("td",[e("span",[t._v(t._s(t.detail.code))]),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"badge badge-success"},[t._v(t._s(t.detail.name))])]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(t.detail.net_cost,2)))]),t._v(" "),e("td",[e("span",{staticClass:"badge badge-outline-warning"},[t._v(t._s(t.detail.stock)+" "+t._s(t.detail.unitPurchase))])]),t._v(" "),e("td",[e("div",{staticClass:"quantity"},[e("b-input-group",[e("b-input-group-prepend",[e("span",{directives:[{name:"show",rawName:"v-show",value:0!==t.detail.no_unit,expression:"detail.no_unit !== 0"}],staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.fire(t.events.DecrementItem,t.detail)}}},[t._v("-")])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.quantity,expression:"detail.quantity"}],staticClass:"form-control",attrs:{min:0,disabled:1===t.detail.del||0===t.detail.no_unit},domProps:{value:t.detail.quantity},on:{change:function(e){t.fire(t.events.VerifyItemQty,c(c({},t.detail),{},{quantity:parseFloat(e.target.value)}))},input:function(e){e.target.composing||t.$set(t.detail,"quantity",e.target.value)}}}),t._v(" "),e("b-input-group-append",[e("span",{directives:[{name:"show",rawName:"v-show",value:0!==t.detail.no_unit,expression:"detail.no_unit !== 0"}],staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.fire(t.events.IncrementItem,t.detail)}}},[t._v("+")])])],1)],1)]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.discount_amount))]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(t.detail.tax*t.detail.quantity,2)))]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.detail.subtotal.toFixed(2)))]),t._v(" "),e("td",{directives:[{name:"show",rawName:"v-show",value:0!==t.detail.no_unit,expression:"detail.no_unit !== 0"}]},[t.currentUserPermissions&&t.currentUserPermissions.includes("edit_product_purchase")?e("i",{staticClass:"i-Edit text-25 text-success",on:{click:function(e){return t.fire(t.events.EditItem,t.detail)}}}):t._e(),t._v(" "),e("i",{staticClass:"i-Close-Window text-25 text-danger",on:{click:function(e){return t.fire(t.events.DeleteItem,t.detail)}}})])])}),[],!1,null,"3121178f",null).exports;function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function P(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const x={name:"OrderProductContainer",mixins:[o.A],components:{OrderProductItem:b},props:{details:{type:Array,default:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){P(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,a.L8)(["currentUserPermissions","currentUser"]))};const w=(0,_.A)(x,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover"},[e("thead",{staticClass:"bg-gray-300"},[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("ProductName")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Net_Unit_Cost")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("CurrentStock")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Qty")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Discount")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Tax")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("SubTotal")))]),t._v(" "),t._m(0)])]),t._v(" "),e("tbody",[t.details.length<=0?e("tr",[e("td",{attrs:{colspan:"9"}},[t._v(t._s(t.$t("NodataAvailable")))])]):t._e(),t._v(" "),t._l(t.details,(function(t){return e("OrderProductItem",{key:t.detail_id,class:{row_deleted:1===t.del||0===t.no_unit},attrs:{detail:t}})}))],2)])])}),[function(){var t=this._self._c;return t("th",{staticClass:"text-center",attrs:{scope:"col"}},[t("i",{staticClass:"fa fa-trash"})])}],!1,null,"d6cd42c2",null).exports;const S={name:"ValidationInput",mixins:[o.A],props:{name:{type:String,required:!0},rules:{type:Object,required:!0}},mounted:function(){},computed:{id:function(){return this.name.toLowerCase().replace(/\s+/g,"-")}}};const O=(0,_.A)(S,(function(){var t=this,e=t._self._c;return e("validation-provider",{attrs:{name:t.name,rules:{required:!0,regex:/^\d*\.?\d*$/}},scopedSlots:t._u([{key:"default",fn:function(r){return[e("b-form-group",{attrs:{label:t.$t(t.name)+" *",id:t.id}},[t._t("default",null,{validationContext:r}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"".concat(t.id)-t.feedback}},[t._v(t._s(r.errors[0]))])],2)]}}],null,!0)})}),[],!1,null,"65ee9c40",null).exports;function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function j(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?j(Object(r),!0).forEach((function(e){$(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=k(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const C={name:"UpdateProductItemForm",mixins:[o.A],components:{ValidationInput:O},props:{detail:{type:Object,required:!0},is_loading:{type:Boolean,default:!1}},computed:D(D({},(0,a.L8)(["currentUserPermissions","currentUser"])),{},{events:function(){return d.eP}})};const E=(0,_.A)(C,(function(){var t=this,e=t._self._c;return e("b-form",{on:{submit:function(e){return e.preventDefault(),t.$emit("submit")}}},[e("b-row",[e("b-col",{attrs:{lg:"6",md:"6",sm:"12"}},[e("ValidationInput",{attrs:{name:"ProductCost",rules:{required:!0,regex:/^\d*\.?\d*$/}},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.validationContext;return[e("b-form-input",{attrs:{label:"Product Cost",state:t.getValidationState(i),"aria-describedby":"cost-feedback"},model:{value:t.detail.unit_cost,callback:function(e){t.$set(t.detail,"unit_cost",t._n(e))},expression:"detail.unit_cost"}})]}}])})],1),t._v(" "),e("b-col",{attrs:{lg:"6",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"Tax Method",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.valid,n=r.errors;return e("b-form-group",{attrs:{label:t.$t("TaxMethod")+" *"}},[e("v-select",{class:{"is-invalid":!!n.length},attrs:{state:!n[0]&&(!!i||null),reduce:function(t){return t.value},placeholder:t.$t("Choose_Method"),options:[{label:"Exclusive",value:"1"},{label:"Inclusive",value:"2"}]},model:{value:t.detail.tax_method,callback:function(e){t.$set(t.detail,"tax_method",e)},expression:"detail.tax_method"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(n[0]))])],1)}}])})],1),t._v(" "),e("b-col",{attrs:{lg:"6",md:"6",sm:"12"}},[e("ValidationInput",{attrs:{name:"OrderTax",rules:{required:!0,regex:/^\d*\.?\d*$/}},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.validationContext;return[e("b-input-group",{attrs:{append:"%"}},[e("b-form-input",{attrs:{label:"Order Tax",state:t.getValidationState(i),"aria-describedby":"OrderTax-feedback"},model:{value:t.detail.tax_percent,callback:function(e){t.$set(t.detail,"tax_percent",t._n(e))},expression:"detail.tax_percent"}})],1)]}}])})],1),t._v(" "),e("b-col",{attrs:{lg:"6",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"Discount Method",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.valid,n=r.errors;return e("b-form-group",{attrs:{label:t.$t("Discount_Method")+" *"}},[e("v-select",{class:{"is-invalid":!!n.length},attrs:{reduce:function(t){return t.value},placeholder:t.$t("Choose_Method"),state:!n[0]&&(!!i||null),options:[{label:"Percent %",value:"1"},{label:"Fixed",value:"2"}]},model:{value:t.detail.discount_method,callback:function(e){t.$set(t.detail,"discount_method",e)},expression:"detail.discount_method"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(n[0]))])],1)}}])})],1),t._v(" "),e("b-col",{attrs:{lg:"6",md:"6",sm:"12"}},[e("ValidationInput",{attrs:{name:"Discount",rules:{required:!0,regex:/^\d*\.?\d*$/}},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.validationContext;return["1"===t.detail.discount_method?e("b-input-group",{attrs:{append:"%"}},[e("b-form-input",{attrs:{label:"Discount",state:t.getValidationState(i),"aria-describedby":"Discount-feedback"},model:{value:t.detail.discount,callback:function(e){t.$set(t.detail,"discount",t._n(e))},expression:"detail.discount"}})],1):e("b-input-group",{attrs:{prepend:"$"}},[e("b-form-input",{attrs:{label:"Discount",state:t.getValidationState(i),"aria-describedby":"Discount-feedback"},model:{value:t.detail.discount,callback:function(e){t.$set(t.detail,"discount",t._n(e))},expression:"detail.discount"}})],1)]}}])})],1),t._v(" "),e("b-col",{directives:[{name:"show",rawName:"v-show",value:t.detail.is_imei,expression:"detail.is_imei"}],attrs:{lg:"12",md:"12",sm:"12"}},[e("b-form-group",{attrs:{label:t.$t("Add_product_IMEI_Serial_number")}},[e("b-form-input",{attrs:{label:"Add_product_IMEI_Serial_number",placeholder:t.$t("Add_product_IMEI_Serial_number")},model:{value:t.detail.imei_number,callback:function(e){t.$set(t.detail,"imei_number",e)},expression:"detail.imei_number"}})],1)],1),t._v(" "),e("b-col",{attrs:{md:"12"}},[e("b-form-group",[e("b-button",{attrs:{variant:"primary",type:"submit",disabled:t.is_loading}},[e("i",{staticClass:"i-Yes me-2 font-weight-bold"}),t._v(" "+t._s(t.$t("submit"))+"\n                ")]),t._v(" "),t.is_loading?t._m(0):t._e()],1)],1)],1)],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"typo__p"},[t("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],!1,null,"19e9b459",null).exports;var I=r(78061);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function U(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=T(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=T(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const N={mixins:[o.A],components:{OrderProductContainer:w,UpdateProductItemForm:E},metaInfo:{title:"Edit Purchase"},data:function(){var t=this;return{registerEvents:U(U(U(U(U({},d.eP.IncrementItem,(function(e){return t.increment(e,e.detail_id)})),d.eP.DecrementItem,(function(e){return t.decrement(e,e.detail_id)})),d.eP.VerifyItemQty,(function(e){return t.verifyQty(e,e.detail_id)})),d.eP.DeleteItem,(function(e){return t.deleteProductDetail(e.detail_id)})),d.eP.EditItem,(function(e){return t.modalUpdateDetail(e)})),focused:!1,timer:null,search_input:"",product_filter:[],is_loading:!0,submit_processing:!1,submit_processing_detail:!1,warehouses:[],suppliers:[],products:[],details:[],detail:{},purchases:[],purchase:{id:"",status:"",date:"",notes:"",supplier_id:"",warehouse_id:"",tax_rate:0,tax_net:0,shipping:0,discount:0},total:0,grand_total:0,product:{id:"",code:"",stock:"",quantity:1,discount:"",discount_net:"",discount_method:"",name:"",no_unit:"",unitPurchase:"",purchase_unit_id:"",net_cost:"",total_cost:"",unit_cost:"",subtotal:"",product_id:"",detail_id:"",tax:"",tax_percent:"",tax_method:"",product_variant_id:"",del:"",is_imei:"",imei_number:""}}},methods:{handleFocus:function(){this.focused=!0},handleBlur:function(){this.focused=!1},submitPurchase:function(){var t=this;this.$refs.edit_purchase.validate().then((function(e){e?t.updatePurchase():t.makeDangerToast("Please_fill_the_form_correctly","Failed")}))},submitUpdateDetail:function(){var t=this;this.$refs.Update_Detail_Purchase.validate().then((function(e){e&&t.Update_Detail()}))},modalUpdateDetail:function(t){var e=this;this.execute((function(){e.detail={},e.detail.name=t.name,e.detail.detail_id=t.detail_id,e.detail.unit_cost=t.unit_cost,e.detail.tax_method=t.tax_method,e.detail.discount_method=t.discount_method,e.detail.discount=t.discount,e.detail.quantity=t.quantity,e.detail.tax_percent=t.tax_percent,e.detail.is_imei=t.is_imei,e.detail.imei_number=t.imei_number,e.$nextTick((function(){e.$bvModal.show("form_Update_Detail")}))}))},Update_Detail:function(){var t=this;n().start(),n().set(.1),this.submit_processing_detail=!0;for(var e=0;e<this.details.length;e++)this.details[e].detail_id===this.detail.detail_id&&(this.details[e].tax_percent=this.detail.tax_percent,this.details[e].unit_cost=this.detail.unit_cost,this.details[e].quantity=this.detail.quantity,this.details[e].tax_method=this.detail.tax_method,this.details[e].discount_method=this.detail.discount_method,this.details[e].discount=this.detail.discount,this.details[e].imei_number=this.detail.imei_number,"2"==this.details[e].discount_method?this.details[e].discount_net=this.detail.discount:this.details[e].discount_net=parseFloat(this.detail.unit_cost*this.details[e].discount/100),"1"==this.details[e].tax_method?(this.details[e].net_cost=parseFloat(this.detail.unit_cost-this.details[e].discount_net),this.details[e].tax=parseFloat(this.detail.tax_percent*(this.detail.unit_cost-this.details[e].discount_net)/100)):(this.details[e].net_cost=parseFloat((this.detail.unit_cost-this.details[e].discount_net)/(this.detail.tax_percent/100+1)),this.details[e].tax=parseFloat(this.detail.unit_cost-this.details[e].net_cost-this.details[e].discount_net)),this.$forceUpdate());this.calculateTotal(),this.submit_processing_detail=!1,this.$nextTick((function(){t.$bvModal.hide("form_Update_Detail")}))},search:function(){var t=this;if(this.timer&&(clearTimeout(this.timer),this.timer=null),this.search_input.length<2)return this.product_filter=[];(0,I.RP)(this.purchase.warehouse_id)?this.timer=setTimeout((function(){var e=t.products.filter((function(e){return e.code===t.search_input||e.barcode.includes(t.search_input)}));1===e.length?t.searchProduct(e[0]):t.product_filter=t.products.filter((function(e){return e.name.toLowerCase().includes(t.search_input.toLowerCase())||e.code.toLowerCase().includes(t.search_input.toLowerCase())||e.barcode.toLowerCase().includes(t.search_input.toLowerCase())}))}),800):this.makeWarningToast("SelectWarehouse")},getResultValue:function(t){return t.code+" ("+t.name+")"},searchProduct:function(t){this.product={},this.details.length>0&&this.details.some((function(e){return e.code===t.code}))?this.makeWarningToast("AlreadyAdd"):(this.product.code=t.code,this.product.quantity=1,this.product.no_unit=1,this.product.stock=t.qte_purchase,this.product.product_variant_id=t.product_variant_id,this.getProductDetails(t.id,t.product_variant_id)),this.search_input="",this.$refs.product_autocomplete.value="",this.product_filter=[]},Selected_Warehouse:function(t){this.search_input="",this.product_filter=[],this.getProductsByWarehouse(t)},getProductsByWarehouse:function(t){var e=this;this.execute((function(){axios.get("get_products_by_warehouse/"+t+"?stock=0&product_service=0").then((function(t){return e.products=t.data})).catch((function(t){console.error(t),e.makeWarningToast("Get product by warehouse failed")}))}))},addProduct:function(){this.details.length>0?this.getLastDetailId():0===this.details.length&&(this.product.detail_id=1),this.details.push(this.product),this.product.is_imei&&this.modalUpdateDetail(this.product)},verifyQty:function(t,e){for(var r=0;r<this.details.length;r++)this.details[r].detail_id===e&&(isNaN(t.quantity)&&(this.details[r].quantity=1),this.calculateTotal(),this.$forceUpdate())},increment:function(t,e){for(var r=0;r<this.details.length;r++)this.details[r].detail_id===e&&this.formatNumber(this.details[r].quantity++,2);this.$forceUpdate(),this.calculateTotal()},decrement:function(t,e){for(var r=0;r<this.details.length;r++)this.details[r].detail_id===e&&t.quantity-1>0&&this.formatNumber(this.details[r].quantity--,2);this.$forceUpdate(),this.calculateTotal()},keyupUpdatePurchase:function(t){(0,I.W2)(this.purchase[t])&&(console.log("update: ",this.purchase[t]),this.purchase[t]=0),this.calculateTotal()},calculateTotal:function(){this.total=0;for(var t=0;t<this.details.length;t++){var e=this.details[t].tax*this.details[t].quantity;this.details[t].subtotal=parseFloat(this.details[t].quantity*this.details[t].net_cost+e),this.total+=parseFloat(this.details[t].subtotal)}console.log("calculate total: ",this.total,this.purchase.discount);var r=parseFloat(this.total-this.purchase.discount);this.purchase.tax_net=parseFloat(r*this.purchase.tax_rate/100),this.grand_total=parseFloat(r+this.purchase.tax_net+this.purchase.shipping);var i=this.grand_total.toFixed(2);this.grand_total=parseFloat(i)},deleteProductDetail:function(t){for(var e=0;e<this.details.length;e++)t===this.details[e].detail_id&&this.details.splice(e,1);this.calculateTotal()},verifiedForm:function(){return!(this.details.length<=0||this.hasInvalidDetailQty())||(this.makeWarningToast("AddProductToList"),!1)},hasInvalidDetailQty:function(){return this.details.includes((function(t){return(0,I.W2)(t.quantity)||t.quantity<=0}))},updatePurchase:function(){var t=this;this.verifiedForm()&&this.execute((function(){t.submit_processing=!0;var e=t.$route.params.id;axios.put("purchases/".concat(e),{date:t.purchase.date,supplier_id:t.purchase.supplier_id,warehouse_id:t.purchase.warehouse_id,status:t.purchase.status,notes:t.purchase.notes,tax_rate:t.purchase.tax_rate?t.purchase.tax_rate:0,tax_net:t.purchase.tax_net?t.purchase.tax_net:0,discount:t.purchase.discount?t.purchase.discount:0,shipping:t.purchase.shipping?t.purchase.shipping:0,grand_total:t.grand_total,details:t.details}).then((function(){t.makeSuccessToast("Update.TitlePurchase"),t.$router.push({name:"index_purchases"})})).catch((function(e){console.error("updatePurchase: ",e),t.makeDangerToast("InvalidData","Failed")})).finally((function(){t.submit_processing=!1}))}))},getLastDetailId:function(){this.product.detail_id=0;var t=this.details.length;this.product.detail_id=this.details[t-1].detail_id+1},getProductDetails:function(t,e){var r=this;axios.get("/show_product_data/"+t+"/"+e).then((function(t){r.product.del=0,r.product.id=0,r.product.discount=0,r.product.discount_net=0,r.product.discount_method="2",r.product.product_id=t.data.id,r.product.name=t.data.name,r.product.net_cost=t.data.net_cost,r.product.unit_cost=t.data.unit_cost,r.product.tax=t.data.tax_cost,r.product.tax_method=t.data.tax_method,r.product.tax_percent=t.data.tax_percent,r.product.unitPurchase=t.data.unitPurchase,r.product.purchase_unit_id=t.data.purchase_unit_id,r.product.is_imei=t.data.is_imei,r.product.imei_number="",r.addProduct(),r.calculateTotal()}))},getElements:function(){var t=this,e=this.$route.params.id;axios.get("purchases/".concat(e,"/edit")).then((function(e){t.purchase=e.data.purchase,t.details=e.data.details,t.suppliers=e.data.suppliers,t.warehouses=e.data.warehouses,t.getProductsByWarehouse(t.purchase.warehouse_id),t.calculateTotal()})).catch((function(t){return console.log("getElements: ",t)})).finally((function(){return t.is_loading=!1}))}},created:function(){this.getElements()}};const F=(0,_.A)(N,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("EditPurchase"),folder:t.$t("ListPurchases")}}),t._v(" "),t.is_loading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.is_loading?t._e():e("validation-observer",{ref:"edit_purchase"},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.submitPurchase.apply(null,arguments)}}},[e("b-row",[e("b-col",{attrs:{lg:"12",md:"12",sm:"12"}},[e("b-card",[e("b-row",[e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("validation-provider",{attrs:{name:"date",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){return[e("b-form-group",{attrs:{label:t.$t("date")+" *"}},[e("b-form-input",{attrs:{state:t.getValidationState(r),"aria-describedby":"date-feedback",type:"date"},model:{value:t.purchase.date,callback:function(e){t.$set(t.purchase,"date",e)},expression:"purchase.date"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"OrderTax-feedback"}},[t._v(t._s(r.errors[0])+"\n                                        ")])],1)]}}],null,!1,168378315)})],1),t._v(" "),e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("validation-provider",{attrs:{name:"Supplier",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.valid,n=r.errors;return e("b-form-group",{attrs:{label:t.$t("Supplier")+" *"}},[e("v-select",{class:{"is-invalid":!!n.length},attrs:{state:!n[0]&&(!!i||null),reduce:function(t){return t.value},placeholder:t.$t("Choose_Supplier"),options:t.suppliers.map((function(t){return{label:t.name,value:t.id}}))},model:{value:t.purchase.supplier_id,callback:function(e){t.$set(t.purchase,"supplier_id",e)},expression:"purchase.supplier_id"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(n[0]))])],1)}}],null,!1,700424982)})],1),t._v(" "),e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("validation-provider",{attrs:{name:"warehouse",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.valid,n=r.errors;return e("b-form-group",{attrs:{label:t.$t("warehouse")+" *"}},[e("v-select",{class:{"is-invalid":!!n.length},attrs:{state:!n[0]&&(!!i||null),disabled:t.details.length>0,reduce:function(t){return t.value},placeholder:t.$t("Choose_Warehouse"),options:t.warehouses.map((function(t){return{label:t.name,value:t.id}}))},on:{input:t.Selected_Warehouse},model:{value:t.purchase.warehouse_id,callback:function(e){t.$set(t.purchase,"warehouse_id",e)},expression:"purchase.warehouse_id"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(n[0]))])],1)}}],null,!1,923239089)})],1),t._v(" "),e("b-col",{staticClass:"mb-5",attrs:{md:"12"}},[e("h6",[t._v(t._s(t.$t("ProductName")))]),t._v(" "),e("div",{staticClass:"autocomplete",attrs:{id:"autocomplete"}},[e("input",{ref:"product_autocomplete",staticClass:"autocomplete-input",attrs:{placeholder:t.$t("Scan_Search_Product_by_Code_Name")},on:{input:function(e){return t.search_input=e.target.value},keyup:function(e){return t.search(t.search_input)},focus:t.handleFocus,blur:t.handleBlur}}),t._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.focused,expression:"focused"}],staticClass:"autocomplete-result-list"},t._l(t.product_filter,(function(r){return e("li",{staticClass:"autocomplete-result",on:{mousedown:function(e){return t.searchProduct(r)}}},[t._v("\n                                            "+t._s(t.getResultValue(r))+"\n                                        ")])})),0)])]),t._v(" "),e("b-col",{attrs:{md:"12"}},[e("h5",[t._v(t._s(t.$t("order_products"))+" *")]),t._v(" "),e("OrderProductContainer",{attrs:{details:t.details}})],1),t._v(" "),e("div",{staticClass:"offset-md-9 col-md-3 mt-4"},[e("table",{staticClass:"table table-striped table-sm"},[e("tbody",[e("tr",[e("td",{staticClass:"bold"},[t._v(t._s(t.$t("OrderTax")))]),t._v(" "),e("td",[e("span",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.purchase.tax_net.toFixed(2))+" ("+t._s(t.formatNumber(t.purchase.tax_rate,2))+" %)")])])]),t._v(" "),e("tr",[e("td",{staticClass:"bold"},[t._v(t._s(t.$t("Discount")))]),t._v(" "),e("td",[t._v(" "+t._s(t.displayCurrency(t.purchase.discount,{symbol:t.currentUser.currency})))])]),t._v(" "),e("tr",[e("td",{staticClass:"bold"},[t._v(t._s(t.$t("Shipping")))]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.purchase.shipping.toFixed(2)))])]),t._v(" "),e("tr",[e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Total")))])]),t._v(" "),e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.currentUser.currency)+" "+t._s(t.grand_total.toFixed(2)))])])])])])]),t._v(" "),t.currentUserPermissions&&t.currentUserPermissions.includes("edit_tax_discount_shipping_purchase")?e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("validation-provider",{attrs:{name:"Order Tax",rules:{regex:/^\d*\.?\d*$/}},scopedSlots:t._u([{key:"default",fn:function(r){return[e("b-form-group",{attrs:{label:t.$t("OrderTax")}},[e("b-input-group",{attrs:{append:"%"}},[e("b-form-input",{attrs:{state:t.getValidationState(r),"aria-describedby":"OrderTax-feedback",label:"Order Tax"},on:{change:function(e){return t.keyupUpdatePurchase("tax_rate")}},model:{value:t.purchase.tax_rate,callback:function(e){t.$set(t.purchase,"tax_rate",t._n(e))},expression:"purchase.tax_rate"}})],1),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"OrderTax-feedback"}},[t._v(t._s(r.errors[0])+"\n                                        ")])],1)]}}],null,!1,3601272233)})],1):t._e(),t._v(" "),t.currentUserPermissions&&t.currentUserPermissions.includes("edit_tax_discount_shipping_purchase")?e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("validation-provider",{attrs:{name:"Discount",rules:{regex:/^\d*\.?\d*$/}},scopedSlots:t._u([{key:"default",fn:function(r){return[e("b-form-group",{attrs:{label:t.$t("Discount")}},[e("b-input-group",{attrs:{append:t.currentUser.currency}},[e("b-form-input",{attrs:{state:t.getValidationState(r),"aria-describedby":"Discount-feedback",label:"Discount"},on:{change:function(e){return t.keyupUpdatePurchase("discount")}},model:{value:t.purchase.discount,callback:function(e){t.$set(t.purchase,"discount",t._n(e))},expression:"purchase.discount"}})],1),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"Discount-feedback"}},[t._v(t._s(r.errors[0])+"\n                                        ")])],1)]}}],null,!1,710884381)})],1):t._e(),t._v(" "),t.currentUserPermissions&&t.currentUserPermissions.includes("edit_tax_discount_shipping_purchase")?e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("validation-provider",{attrs:{name:"Shipping",rules:{regex:/^\d*\.?\d*$/}},scopedSlots:t._u([{key:"default",fn:function(r){return[e("b-form-group",{attrs:{label:t.$t("Shipping")}},[e("b-input-group",{attrs:{append:t.currentUser.currency}},[e("b-form-input",{attrs:{state:t.getValidationState(r),"aria-describedby":"Shipping-feedback",label:"Shipping"},on:{change:function(e){return t.keyupUpdatePurchase("shipping")}},model:{value:t.purchase.shipping,callback:function(e){t.$set(t.purchase,"shipping",t._n(e))},expression:"purchase.shipping"}})],1),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"Shipping-feedback"}},[t._v(t._s(r.errors[0])+"\n                                        ")])],1)]}}],null,!1,2587702813)})],1):t._e(),t._v(" "),e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("validation-provider",{attrs:{name:"Status",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.valid,n=r.errors;return e("b-form-group",{attrs:{label:t.$t("Status")+" *"}},[e("v-select",{class:{"is-invalid":!!n.length},attrs:{state:!n[0]&&(!!i||null),reduce:function(t){return t.value},placeholder:t.$t("Choose_Status"),options:[{label:"received",value:"received"},{label:"pending",value:"pending"},{label:"ordered",value:"ordered"}]},model:{value:t.purchase.status,callback:function(e){t.$set(t.purchase,"status",e)},expression:"purchase.status"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(n[0]))])],1)}}],null,!1,3585017817)})],1),t._v(" "),e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{label:t.$t("Note")}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.purchase.notes,expression:"purchase.notes"}],staticClass:"form-control",attrs:{rows:"4",placeholder:t.$t("Afewwords")},domProps:{value:t.purchase.notes},on:{input:function(e){e.target.composing||t.$set(t.purchase,"notes",e.target.value)}}})])],1),t._v(" "),e("b-col",{attrs:{md:"12"}},[e("b-form-group",[e("b-button",{attrs:{variant:"primary",disabled:t.submit_processing},on:{click:t.submitPurchase}},[e("i",{staticClass:"i-Yes me-2 font-weight-bold"}),t._v(" "+t._s(t.$t("submit"))+"\n                                    ")]),t._v(" "),t.submit_processing?t._m(0):t._e()],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "),e("validation-observer",{ref:"Update_Detail_Purchase"},[e("b-modal",{attrs:{"hide-footer":"",size:"lg",id:"form_Update_Detail",title:t.detail.name}},[t.detail?e("UpdateProductItemForm",{attrs:{detail:t.detail,is_loading:t.submit_processing_detail},on:{submit:t.submitUpdateDetail}}):t._e()],1)],1)],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"typo__p"},[t("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],!1,null,null,null).exports}}]);